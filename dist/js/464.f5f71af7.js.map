{"version":3,"file":"js/464.f5f71af7.js","mappings":"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","sources":["webpack://face-ui/./src/components/face/index.vue","webpack://face-ui/src/components/face/index.vue","webpack://face-ui/./src/components/face/index.vue?4bcc","webpack://face-ui/./src/components/face/index.vue?efad"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-card',{attrs:{\"header\":\"人脸列表\"}},[_c('el-form',{attrs:{\"inline\":true}},[_c('el-form-item',{attrs:{\"label\":\"人脸名称\"}},[_c('el-input',{attrs:{\"placeholder\":\"名称\",\"clearable\":\"\"},model:{value:(_vm.searchFace.faceName),callback:function ($$v) {_vm.$set(_vm.searchFace, \"faceName\", $$v)},expression:\"searchFace.faceName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"人脸状态\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.searchFace.faceStatus),callback:function ($$v) {_vm.$set(_vm.searchFace, \"faceStatus\", $$v)},expression:\"searchFace.faceStatus\"}},[_c('el-option',{attrs:{\"label\":\"不限\",\"value\":\"\"}}),_c('el-option',{attrs:{\"label\":\"启用\",\"value\":\"0\"}}),_c('el-option',{attrs:{\"label\":\"禁用\",\"value\":\"1\"}})],1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"icon\":\"el-icon-search\"},on:{\"click\":_vm.getFaceList}},[_vm._v(\"搜索\")])],1)],1)],1)],1)],1),_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-card',[_c('el-header',{staticStyle:{\"background-color\":\"#ffffff\"}},[_c('el-button',{attrs:{\"icon\":\"el-icon-circle-plus-outline\"},on:{\"click\":function($event){return _vm.handleSave()}}},[_vm._v(\"添加人脸\")])],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"width\":\"100\",\"prop\":\"fid\",\"label\":\"编号\",\"sortable\":\"\"}}),_c('el-table-column',{attrs:{\"width\":\"150\",\"prop\":\"date\",\"label\":\"人脸图片\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"icon\":\"el-icon-picture-outline\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.selectImg(scope.row.faceBase)}}},[_vm._v(\"查看人脸\")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"label\":\"创建时间\",\"width\":\"200\",\"sortable\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"vefNum\",\"label\":\"验证次数\",\"sortable\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"faceName\",\"label\":\"姓名\"}}),_c('el-table-column',{attrs:{\"prop\":\"remark\",\"label\":\"备注\"}}),_c('el-table-column',{attrs:{\"prop\":\"faceStatus\",\"label\":\"是否启用\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{attrs:{\"value\":scope.row.faceStatus===0,\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"230\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleEdit(scope.$index, scope.row)}}},[_vm._v(\"编辑\")]),_c('el-popconfirm',{attrs:{\"title\":('确认删除'+scope.row.faceName+'的人脸数据吗?')},on:{\"confirm\":function($event){return _vm.handleDelete(scope.$index, scope.row)}}},[_c('el-button',{staticStyle:{\"margin-left\":\"20px\"},attrs:{\"slot\":\"reference\",\"icon\":\"el-icon-delete\",\"size\":\"mini\",\"type\":\"danger\"},slot:\"reference\"},[_vm._v(\"删除\")])],1)]}}])})],1)],1)],1)],1),_c('el-row',{staticClass:\"page-row\"},[_c('el-pagination',{staticClass:\"el-pagination\",attrs:{\"layout\":\"total, sizes, prev, pager, next, jumper\",\"page-sizes\":[5, 10, 30, 50],\"current-page\":_vm.current,\"page-size\":_vm.size,\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":\"人脸图片\",\"visible\":_vm.selectImgDialog,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.selectImgDialog=$event}}},[_c('img',{staticStyle:{\"width\":\"100%\"},attrs:{\"src\":_vm.currentImg}})]),_c('el-dialog',{attrs:{\"title\":_vm.saveAndUpdateTitle,\"visible\":_vm.saveAndUpdateDialog,\"before-close\":_vm.handleClose,\"width\":\"600px\"},on:{\"update:visible\":function($event){_vm.saveAndUpdateDialog=$event}}},[_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.faceObj,\"rules\":_vm.rules,\"label-width\":\"80px\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.faceObj.fid),expression:\"faceObj.fid\"}],attrs:{\"type\":\"hidden\"},domProps:{\"value\":(_vm.faceObj.fid)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.faceObj, \"fid\", $event.target.value)}}}),_c('el-form-item',{attrs:{\"label\":\"人脸名称\",\"prop\":\"faceName\"}},[_c('el-input',{attrs:{\"placeholder\":\"必填项\"},model:{value:(_vm.faceObj.faceName),callback:function ($$v) {_vm.$set(_vm.faceObj, \"faceName\", $$v)},expression:\"faceObj.faceName\"}})],1),_c('el-form-item',{staticStyle:{\"margin-bottom\":\"30px\"},attrs:{\"label\":\"人脸状态\",\"prop\":\"faceStatus\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.faceObj.faceStatus),callback:function ($$v) {_vm.$set(_vm.faceObj, \"faceStatus\", $$v)},expression:\"faceObj.faceStatus\"}},[_c('el-option',{attrs:{\"label\":\"启用\",\"value\":0}}),_c('el-option',{attrs:{\"label\":\"禁用\",\"value\":1}})],1)],1),_c('el-form-item',{staticClass:\"login-mid-mid\",attrs:{\"label\":\"人脸数据\",\"prop\":\"faceBase\"}},[_c('div',{staticClass:\"savevideoCamera-canvasCamera\"},[_c('video',{attrs:{\"id\":\"videoCamera2\",\"width\":_vm.videoWidth,\"height\":_vm.videoHeight,\"autoplay\":\"\"}}),_c('canvas',{staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"canvasCamera2\",\"width\":_vm.videoWidth,\"height\":_vm.videoHeight}}),(_vm.faceImgState)?_c('div',{staticClass:\"saveface-special-effects-2\"}):_c('div',{staticClass:\"saveface-special-effects\"}),_c('el-input',{attrs:{\"type\":\"hidden\"},model:{value:(_vm.faceObj.faceBase),callback:function ($$v) {_vm.$set(_vm.faceObj, \"faceBase\", $$v)},expression:\"faceObj.faceBase\"}})],1),_c('div',{staticClass:\"savefaceBase\",attrs:{\"id\":\"faceBase\"}}),(_vm.cameraState)?_c('div',{staticClass:\"saveface-btn\"},[_c('el-button',{on:{\"click\":_vm.enteringFace}},[_vm._v(_vm._s(_vm.faceObj.faceBase===''?'录入人脸':'重新录入'))])],1):_c('div',{staticClass:\"saveface-btn\"},[_c('el-button',[_vm._v(\"摄像头正在加载...\")])],1)]),_c('el-form-item',{attrs:{\"label\":\"备注\"}},[_c('el-input',{attrs:{\"placeholder\":\"非必填\",\"type\":\"textarea\"},model:{value:(_vm.faceObj.remark),callback:function ($$v) {_vm.$set(_vm.faceObj, \"remark\", $$v)},expression:\"faceObj.remark\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('ruleForm')}}},[_vm._v(\"立即创建\")]),_c('el-button',{on:{\"click\":function($event){return _vm.resetForm('ruleForm')}}},[_vm._v(\"重置\")])],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n\r\n    <!--条件搜索区域-->\r\n    <el-row>\r\n      <el-col :span=\"24\">\r\n        <el-card header=\"人脸列表\">\r\n          <el-form :inline=\"true\">\r\n              <el-form-item label=\"人脸名称\">\r\n                <el-input\r\n                    v-model=\"searchFace.faceName\"\r\n                    placeholder=\"名称\"\r\n                    clearable>\r\n                </el-input>\r\n              </el-form-item>\r\n            <el-form-item label=\"人脸状态\">\r\n              <el-select v-model=\"searchFace.faceStatus\" placeholder=\"请选择\">\r\n                <el-option label=\"不限\" value=\"\"></el-option>\r\n                <el-option label=\"启用\" value=\"0\"></el-option>\r\n                <el-option label=\"禁用\" value=\"1\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button icon=\"el-icon-search\" @click=\"getFaceList\">搜索</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n\r\n\r\n    <!--数据显示区域-->\r\n    <el-row>\r\n      <el-col :span=\"24\">\r\n        <el-card>\r\n          <el-header style=\"background-color: #ffffff\">\r\n            <el-button @click=\"handleSave()\" icon=\"el-icon-circle-plus-outline\">添加人脸</el-button>\r\n          </el-header>\r\n          <el-table\r\n              :data=\"tableData\"\r\n              style=\"width: 100%\">\r\n            <el-table-column\r\n                width=\"100\"\r\n                prop=\"fid\"\r\n                label=\"编号\" sortable>\r\n            </el-table-column>\r\n\r\n            <el-table-column\r\n                width=\"150\"\r\n                prop=\"date\"\r\n                label=\"人脸图片\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button icon=\"el-icon-picture-outline\" size=\"mini\" @click=\"selectImg(scope.row.faceBase)\">查看人脸</el-button>\r\n              </template>\r\n            </el-table-column>\r\n\r\n            <el-table-column\r\n                prop=\"createTime\"\r\n                label=\"创建时间\" width=\"200\" sortable>\r\n            </el-table-column>\r\n\r\n            <el-table-column\r\n                prop=\"vefNum\"\r\n                label=\"验证次数\" sortable>\r\n            </el-table-column>\r\n\r\n            <el-table-column\r\n                prop=\"faceName\"\r\n                label=\"姓名\">\r\n            </el-table-column>\r\n\r\n            <el-table-column\r\n                prop=\"remark\"\r\n                label=\"备注\">\r\n            </el-table-column>\r\n\r\n            <el-table-column\r\n                prop=\"faceStatus\"\r\n                label=\"是否启用\" sortable>\r\n              <template slot-scope=\"scope\">\r\n                <el-switch\r\n                    :value=\"scope.row.faceStatus===0\"\r\n                    active-color=\"#13ce66\"\r\n                    inactive-color=\"#ff4949\">\r\n                </el-switch>\r\n              </template>\r\n            </el-table-column>\r\n\r\n            <el-table-column label=\"操作\" width=\"230\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button\r\n                    icon=\"el-icon-edit\"\r\n                    size=\"mini\"\r\n                    @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\r\n                <el-popconfirm\r\n                :title=\"('确认删除'+scope.row.faceName+'的人脸数据吗?')\"\r\n                @confirm=\"handleDelete(scope.$index, scope.row)\"\r\n                >\r\n                  <el-button\r\n                      style=\"margin-left: 20px\"\r\n                      icon=\"el-icon-delete\"\r\n                      size=\"mini\"\r\n                      type=\"danger\"  slot=\"reference\">删除</el-button>\r\n                </el-popconfirm>\r\n\r\n              </template>\r\n            </el-table-column>\r\n\r\n          </el-table>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <!--分页-->\r\n    <el-row class=\"page-row\">\r\n      <el-pagination\r\n          class=\"el-pagination\"\r\n         @size-change=\"handleSizeChange\"\r\n         @current-change=\"handleCurrentChange\"\r\n         layout=\"total, sizes, prev, pager, next, jumper\"\r\n         :page-sizes=\"[5, 10, 30, 50]\"\r\n         :current-page=\"current\"\r\n         :page-size=\"size\"\r\n         :total=\"total\">\r\n      </el-pagination>\r\n    </el-row>\r\n\r\n\r\n\r\n    <!--查看人脸图片-->\r\n    <el-dialog\r\n        title=\"人脸图片\"\r\n        :visible.sync=\"selectImgDialog\"\r\n        width=\"30%\">\r\n        <img style=\"width: 100%;\" :src=\"currentImg\">\r\n    </el-dialog>\r\n\r\n\r\n    <!-- 添加/修改-->\r\n    <el-dialog\r\n    :title=\"saveAndUpdateTitle\"\r\n    :visible.sync=\"saveAndUpdateDialog\"\r\n    :before-close=\"handleClose\"\r\n    width=\"600px\"\r\n    >\r\n      <el-form :model=\"faceObj\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"80px\">\r\n\r\n        <input type=\"hidden\" v-model=\"faceObj.fid\"></input>\r\n\r\n        <el-form-item label=\"人脸名称\" prop=\"faceName\">\r\n          <el-input placeholder=\"必填项\" v-model=\"faceObj.faceName\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"人脸状态\" style=\"margin-bottom: 30px\" prop=\"faceStatus\">\r\n          <el-select style=\"width: 100%;\" v-model=\"faceObj.faceStatus\" placeholder=\"请选择\">\r\n            <el-option label=\"启用\" :value=\"0\"></el-option>\r\n            <el-option label=\"禁用\" :value=\"1\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"人脸数据\" class=\"login-mid-mid\" prop=\"faceBase\">\r\n          <!--捕获人脸区域-->\r\n          <div class=\"savevideoCamera-canvasCamera \">\r\n            <video\r\n                id=\"videoCamera2\"\r\n                :width=\"videoWidth\"\r\n                :height=\"videoHeight\"\r\n                autoplay\r\n            ></video>\r\n            <canvas\r\n                style=\"display: none\"\r\n                id=\"canvasCamera2\"\r\n                :width=\"videoWidth\"\r\n                :height=\"videoHeight\"\r\n            ></canvas>\r\n\r\n            <!--人脸特效区域-->\r\n            <div v-if=\"faceImgState\" class=\"saveface-special-effects-2\"></div>\r\n            <div v-else class=\"saveface-special-effects\"></div>\r\n            <el-input type=\"hidden\" v-model=\"faceObj.faceBase\"></el-input>\r\n          </div>\r\n\r\n          <!--拍照显示区域-->\r\n          <div class=\"savefaceBase\" id=\"faceBase\">\r\n\r\n          </div>\r\n\r\n          <!--按钮区域-->\r\n          <div class=\"saveface-btn\" v-if=\"cameraState\">\r\n            <el-button @click=\"enteringFace\">{{faceObj.faceBase===''?'录入人脸':'重新录入'}}</el-button>\r\n          </div>\r\n          <div class=\"saveface-btn\" v-else>\r\n            <el-button >摄像头正在加载...</el-button>\r\n          </div>\r\n\r\n        </el-form-item>\r\n\r\n\r\n        <el-form-item label=\"备注\">\r\n          <el-input placeholder=\"非必填\" type=\"textarea\" v-model=\"faceObj.remark\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">立即创建</el-button>\r\n          <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\r\n        </el-form-item>\r\n\r\n\r\n      </el-form>\r\n\r\n    </el-dialog>\r\n\r\n  </div>\r\n\r\n\r\n</template>\r\n\r\n<script>\r\nimport $camera from \"../../camera/index.js\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      size:5,\r\n      current:1,\r\n      total:0,\r\n      videoWidth: 200,\r\n      videoHeight: 200,\r\n      faceImgState:false,\r\n      searchFace:{\r\n        faceName:'',\r\n        faceStatus:''\r\n      },\r\n      tableData:[],\r\n      selectImgDialog:false,\r\n      currentImg:'',\r\n      saveAndUpdateDialog:false,\r\n      saveAndUpdateTitle:'',\r\n      faceObj:{\r\n        fid:null,\r\n        faceName:'',\r\n        faceBase:'',\r\n        faceStatus:0,\r\n        remark:'',\r\n        addAndUpdateState:false,\r\n      },\r\n      rules:{\r\n        faceName:[\r\n          { required: true, message: '请输入人脸名称', trigger: 'blur' },\r\n          { min: 2, max: 5, message: '长度在 2 到 5 个字符', trigger: 'blur' }\r\n        ],\r\n        faceBase:[\r\n          { required: true, message: '人脸数据不能为空'}\r\n        ]\r\n      },\r\n      faceOption:{},\r\n      cameraState:false\r\n    }\r\n  },\r\n  watch:{\r\n    saveAndUpdateDialog:{\r\n      handler(newValue, oldValue){\r\n        // 监听弹出层 设置摄像头是否开启\r\n        if (newValue){\r\n          // 延迟加载 不然document.getElementById找不到\r\n          setTimeout(()=>{\r\n            // 开启摄像头\r\n            this.faceOption = $camera.getCamera({\r\n              videoWidth: 200,\r\n              videoHeight: 200,\r\n              thisCancas: null,\r\n              thisContext: null,\r\n              thisVideo: null,\r\n              canvasId:'canvasCamera2',\r\n              videoId:'videoCamera2'\r\n            });\r\n          },1000)\r\n        }else {\r\n          let faceBase = document.getElementById(\"faceBase\");\r\n          faceBase.innerHTML= \"\"\r\n          if(this.faceOption.thisVideo != null){\r\n            // 不等于null 关闭摄像头\r\n            this.faceOption.thisVideo.srcObject.getTracks()[0].stop();\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  // 获取人脸数据\r\n  created() {\r\n      this.getFaceList()\r\n  },\r\n  methods: {\r\n    // 录入\r\n    enteringFace(){\r\n      this.faceObj.faceBase = $camera.draw(this.faceOption)\r\n      let faceBase = document.getElementById(\"faceBase\");\r\n      faceBase.innerHTML = \"<img src='\"+this.faceObj.faceBase+\"' />\"\r\n    },\r\n    // 增加|修改\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          this.$http.post(\"/face/\"+(this.addAndUpdateState?'save':'update'),this.faceObj).then(res =>{\r\n            this.$message({\r\n              showClose:true,\r\n              message:res.data.msg,\r\n              type:'success',\r\n              duration:3000\r\n            })\r\n            this.getFaceList()\r\n            this.saveAndUpdateDialog = false\r\n          })\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    // 重置表单\r\n    resetForm(formName) {\r\n      let faceBase = document.getElementById(\"faceBase\");\r\n      faceBase.innerHTML= \"\"\r\n      this.$refs[formName].resetFields();\r\n    },\r\n    // 查看人脸\r\n    selectImg(faceBase){\r\n        this.selectImgDialog = true\r\n        this.currentImg = faceBase\r\n    },\r\n    // 获取人脸列表\r\n    getFaceList(){\r\n        this.$http.get('/face/faceList',{\r\n          params:{\r\n            current:this.current,\r\n            size:this.size,\r\n            faceName:this.searchFace.faceName,\r\n            faceStatus:this.searchFace.faceStatus\r\n          }\r\n        }).then(res =>{\r\n          this.tableData = res.data.data.records\r\n          this.size = res.data.data.size\r\n          this.current = res.data.data.current\r\n          this.total = res.data.data.total\r\n        })\r\n    },\r\n    // 分页\r\n    handleSizeChange(val) {\r\n      this.size = val\r\n      this.getFaceList()\r\n    },\r\n    // 分页\r\n    handleCurrentChange(val) {\r\n      this.current = val\r\n      this.getFaceList()\r\n    },\r\n    // 关闭弹出层\r\n    handleClose() {\r\n      this.saveAndUpdateDialog = false\r\n      this.cameraState = false\r\n      this.resetForm('ruleForm')\r\n    },\r\n    // 设置按钮的延迟加载\r\n    setCameraState(){\r\n      setTimeout(()=>{\r\n        this.cameraState = true\r\n      },1500)\r\n    },\r\n    // 添加\r\n    handleSave(){\r\n      this.setCameraState()\r\n      this.addAndUpdateState = true\r\n      this.saveAndUpdateDialog = true\r\n      this.saveAndUpdateTitle = '添加人脸'\r\n    },\r\n    // 修改\r\n    handleEdit(index, row) {\r\n      this.setCameraState()\r\n      this.addAndUpdateState = false\r\n      this.saveAndUpdateDialog = true\r\n      this.saveAndUpdateTitle = '修改人脸'\r\n      this.$http.get(\"/face/info/\"+row.fid).then(res =>{\r\n        this.faceObj = res.data.data\r\n        let faceBase = document.getElementById(\"faceBase\");\r\n        faceBase.innerHTML = \"<img src='\"+this.faceObj.faceBase+\"' />\"\r\n      })\r\n    },\r\n    //删除\r\n    handleDelete(index, row) {\r\n      console.log(index, row);\r\n      this.$http.get(\"/face/faceDelete/\"+row.fid).then(res =>{\r\n        this.getFaceList();\r\n        this.$message.success(res.data.msg)\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n@import \"./index.css\";\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=e16795ba&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=e16795ba&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","model","value","searchFace","faceName","callback","$$v","$set","expression","faceStatus","on","getFaceList","_v","staticStyle","$event","handleSave","tableData","scopedSlots","_u","key","fn","scope","selectImg","row","faceBase","handleEdit","$index","handleDelete","slot","staticClass","current","size","total","handleSizeChange","handleCurrentChange","selectImgDialog","currentImg","saveAndUpdateTitle","saveAndUpdateDialog","handleClose","ref","faceObj","rules","directives","name","rawName","fid","domProps","target","composing","videoWidth","videoHeight","faceImgState","cameraState","enteringFace","_s","remark","submitForm","resetForm","staticRenderFns","data","addAndUpdateState","required","message","trigger","min","max","faceOption","watch","handler","newValue","oldValue","setTimeout","thisCancas","thisContext","thisVideo","canvasId","videoId","created","methods","formName","showClose","type","duration","params","then","val","setCameraState","index","console","component"],"sourceRoot":""}